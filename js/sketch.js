// Generated by CoffeeScript 2.5.1
var Digits,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

import _ from 'https://cdn.skypack.dev/lodash';

import {
  r4r,
  signal,
  range,
  br,
  div,
  input,
  button,
  abs
} from '../js/utils.js';

Digits = (target, numbers) => {
  var click, n, setSolutions, solutions, solve, solve1, t;
  [solutions, setSolutions] = signal([]);
  solve = (t, n) => {
    var i, j, len, ref, results;
    ref = _.range(2000);
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      if (solve1(t, _.cloneDeep(n))) {
        break;
      } else {
        results.push(void 0);
      }
    }
    return results;
  };
  solve1 = (t, n) => {
    var a, b, best, c, lines, op;
    lines = [];
    best = [1000, []];
    while (n.length >= 2) {
      n = _.shuffle(n);
      [a, b] = n.slice(0, 2);
      if (a < b) {
        [a, b] = [b, a];
      }
      op = _.sample("+*-/");
      c = 0;
      if (op === '+') {
        c = a + b;
      }
      if (op === '-') {
        c = a - b;
      }
      if (b !== 1) {
        if (op === '*') {
          c = a * b;
        }
        if (op === '/' && modulo(a, b) === 0) {
          c = Math.floor(a / b);
        }
      }
      if (c > 0) {
        lines.push(`${a} ${op} ${b} = ${c}`);
        n.shift();
        n.shift();
        n.push(c);
        if (abs(t - c) < best[0]) {
          best = [abs(t - c), lines.slice()];
          setSolutions(best[1]);
          if (best[0] === 0) {
            return true;
          }
        }
      }
    }
    return false;
  };
  click = (t, n) => {
    return solve(parseInt(t.value), n.value.split(' ').map((x) => {
      return parseInt(x);
    }));
  };
  return div({}, div({}, n = input({
    size: 13,
    value: numbers
  }), t = input({
    size: 3,
    value: target
  }), button({
    onclick: () => {
      return click(t, n);
    }
  }, "solve")), () => {
    var j, len, ref, results, sol;
    ref = solutions();
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      sol = ref[j];
      results.push(div({}, sol));
    }
    return results;
  }, br({}));
};

r4r(() => {
  return div({
    style: "text-align:center;font-size:2em"
  }, Digits(156, '25 15 11 7 3 2'), Digits(117, '1 3 9 27 81 35'), Digits(15, '4 2 1 1'));
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsTUFBQTtFQUFBOztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUSxHQUFSO0VBQVksTUFBWjtFQUFtQixLQUFuQjtFQUF5QixFQUF6QjtFQUE0QixHQUE1QjtFQUFnQyxLQUFoQztFQUFzQyxNQUF0QztFQUE2QyxHQUE3QztDQUFBLE1BQUE7O0FBRUEsTUFBQSxHQUFTLENBQUMsTUFBRCxFQUFRLE9BQVIsQ0FBQSxHQUFBO0FBQ1QsTUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLFlBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQTtFQUFDLENBQUMsU0FBRCxFQUFXLFlBQVgsQ0FBQSxHQUEyQixNQUFBLENBQU8sRUFBUDtFQUMzQixLQUFBLEdBQVEsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBLEdBQUE7QUFDVCxRQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFFO0FBQUE7SUFBQSxLQUFBLHFDQUFBOztNQUNDLElBQUcsTUFBQSxDQUFPLENBQVAsRUFBVSxDQUFDLENBQUMsU0FBRixDQUFZLENBQVosQ0FBVixDQUFIO0FBQWdDLGNBQWhDO09BQUEsTUFBQTs2QkFBQTs7SUFERCxDQUFBOztFQURPO0VBR1IsTUFBQSxHQUFTLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBQSxHQUFBO0FBQ1YsUUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsS0FBQSxFQUFBO0lBQUUsS0FBQSxHQUFRO0lBQ1IsSUFBQSxHQUFPLENBQUMsSUFBRCxFQUFNLEVBQU47QUFDUCxXQUFNLENBQUMsQ0FBQyxNQUFGLElBQVksQ0FBbEI7TUFDQyxDQUFBLEdBQUksQ0FBQyxDQUFDLE9BQUYsQ0FBVSxDQUFWO01BQ0os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VyxnQkFBWCxDQURELEVBRUMsTUFBQSxDQUFPLEdBQVAsRUFBVyxnQkFBWCxDQUZELEVBR0MsTUFBQSxDQUFPLEVBQVAsRUFBVSxTQUFWLENBSEQ7QUFERyxDQUFKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvbG9kYXNoJ1xyXG5pbXBvcnQge3I0cixzaWduYWwscmFuZ2UsYnIsZGl2LGlucHV0LGJ1dHRvbixhYnN9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5cclxuRGlnaXRzID0gKHRhcmdldCxudW1iZXJzKSA9PlxyXG5cdFtzb2x1dGlvbnMsc2V0U29sdXRpb25zXSA9IHNpZ25hbCBbXVxyXG5cdHNvbHZlID0gKHQsbikgPT5cclxuXHRcdGZvciBpIGluIF8ucmFuZ2UgMjAwMFxyXG5cdFx0XHRpZiBzb2x2ZTEgdCwgXy5jbG9uZURlZXAgbiB0aGVuIGJyZWFrXHJcblx0c29sdmUxID0gKHQsbikgPT5cclxuXHRcdGxpbmVzID0gW11cclxuXHRcdGJlc3QgPSBbMTAwMCxbXV1cclxuXHRcdHdoaWxlIG4ubGVuZ3RoID49IDJcclxuXHRcdFx0biA9IF8uc2h1ZmZsZSBuXHJcblx0XHRcdFthLGJdID0gbi5zbGljZSAwLDJcclxuXHRcdFx0aWYgYSA8IGIgdGhlbiBbYSxiXSA9IFtiLGFdXHJcblx0XHRcdG9wID0gXy5zYW1wbGUgXCIrKi0vXCJcclxuXHJcblx0XHRcdGMgPSAwXHJcblx0XHRcdGlmIG9wID09ICcrJyB0aGVuIGMgPSBhK2JcclxuXHRcdFx0aWYgb3AgPT0gJy0nIHRoZW4gYyA9IGEtYlxyXG5cdFx0XHRpZiBiICE9IDFcclxuXHRcdFx0XHRpZiBvcCA9PSAnKicgdGhlbiBjPWEqYlxyXG5cdFx0XHRcdGlmIG9wID09ICcvJyBhbmQgYSAlJSBiID09IDAgdGhlbiBjPWEvL2JcclxuXHJcblx0XHRcdGlmIGMgPiAwXHJcblx0XHRcdFx0bGluZXMucHVzaCBcIiN7YX0gI3tvcH0gI3tifSA9ICN7Y31cIlxyXG5cdFx0XHRcdG4uc2hpZnQoKVxyXG5cdFx0XHRcdG4uc2hpZnQoKVxyXG5cdFx0XHRcdG4ucHVzaCBjXHJcblxyXG5cdFx0XHRcdGlmIGFicyh0LWMpIDwgYmVzdFswXVxyXG5cdFx0XHRcdFx0YmVzdCA9IFthYnModC1jKSwgbGluZXMuc2xpY2UoKV1cclxuXHRcdFx0XHRcdHNldFNvbHV0aW9ucyBiZXN0WzFdXHJcblx0XHRcdFx0XHRpZiBiZXN0WzBdID09IDAgdGhlbiByZXR1cm4gdHJ1ZVxyXG5cclxuXHRcdGZhbHNlXHJcblxyXG5cdGNsaWNrID0gKHQsbikgPT4gc29sdmUgcGFyc2VJbnQodC52YWx1ZSksIG4udmFsdWUuc3BsaXQoJyAnKS5tYXAgKHgpID0+IHBhcnNlSW50IHhcclxuXHJcblx0ZGl2IHt9LFxyXG5cdFx0ZGl2IHt9LFxyXG5cdFx0XHRuID0gaW5wdXQge3NpemU6MTMsIHZhbHVlOm51bWJlcnN9XHJcblx0XHRcdHQgPSBpbnB1dCB7c2l6ZTozLCB2YWx1ZTp0YXJnZXR9XHJcblx0XHRcdGJ1dHRvbiB7b25jbGljazogKCkgPT4gY2xpY2sgdCxufSxcInNvbHZlXCJcclxuXHRcdD0+IGZvciBzb2wgaW4gc29sdXRpb25zKClcclxuXHRcdFx0ZGl2IHt9LCBzb2xcclxuXHRcdGJyIHt9XHJcblxyXG5yNHIgPT5cclxuXHRkaXYge3N0eWxlOlwidGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjJlbVwifSxcclxuXHRcdERpZ2l0cyAxNTYsJzI1IDE1IDExIDcgMyAyJ1xyXG5cdFx0RGlnaXRzIDExNywnMSAzIDkgMjcgODEgMzUnXHJcblx0XHREaWdpdHMgMTUsJzQgMiAxIDEnXHJcbiJdfQ==
//# sourceURL=c:\github\2023-020-NYT-Digits\coffee\sketch.coffee